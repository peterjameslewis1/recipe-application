(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{38:function(e,t){e.exports="data:image/png;base64,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"},42:function(e,t,a){e.exports=a(74)},47:function(e,t,a){},48:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),s=a.n(c),i=(a(47),a(48),a(5)),u=a(3),o=a(1),l=a.n(o),m=a(4),f="b4783ea160ce4158a0220ce00e812a53",p=function(e){return{type:"FETCH_RECIPE_SUCCESS",payload:e}},E=function(e){return{type:"FETCH_RECIPE_FAILURE",payload:e}},d=function(e){return function(t){t({type:"FETCH_RECIPE_BEGIN"}),fetch("https://api.spoonacular.com/recipes/random?number=20&apiKey=".concat(f)).then((function(e){return e.json()})).then((function(a){if(e.length>1){var n=e.map((function(e){return e.id})),r=a.recipes.map((function(e){return e.id})),c=n.filter((function(e){return r.includes(e)})),s=a.recipes.filter((function(e){return null!==e&&void 0!==(null===e||void 0===e?void 0:e.image)&&!c.includes(e.id)}));t(p(s))}else{var i=a.recipes.filter((function(e){return null!==e&&void 0!==(null===e||void 0===e?void 0:e.image)}));t(p(i))}})).catch((function(e){t(E(e))}))}},h=function(e){return function(t){fetch("https://api.spoonacular.com/recipes/informationBulk?ids=".concat(e,"&apiKey=").concat(f)).then((function(e){return e.json()})).then((function(e){t(function(e){return{type:"FETCH_SEARCH_RECIPE_SUCCESS",payload:e}}(e))})).catch((function(e){t(E(e))}))}},g=function(e,t){return function(a){a({type:"FETCH_RECIPE_BEGIN"}),fetch("https://api.spoonacular.com/recipes/complexSearch?&cuisine=".concat(e,"&number=").concat(t+10,"&apiKey=").concat(f)).then((function(e){return e.json()})).then((function(e){var t=e.results.map((function(e){return e.id}));a(h(t))})).catch((function(e){a(E(e))}))}},b=function(e){return function(t){t({type:"FETCH_RECIPE_BEGIN"}),fetch("https://api.spoonacular.com/recipes/".concat(e,"/similar?apiKey=").concat(f)).then((function(e){return e.json()})).then((function(e){var a=e.map((function(e){return e.id}));t(function(e){return function(t){fetch("https://api.spoonacular.com/recipes/informationBulk?ids=".concat(e,"&apiKey=").concat(f)).then((function(e){return e.json()})).then((function(e){t(function(e){return{type:"FETCH_SIMILAR_RECIPES",payload:e}}(e))})).catch((function(e){t(E(e))}))}}(a))})).catch((function(e){t(E(e))}))}},v=function(e){var t=e.data,a=e.newPrice;return r.a.createElement("div",{className:"stats"},r.a.createElement("div",{className:"stats__item"},r.a.createElement("i",{className:"fas fa-clock"}),r.a.createElement("span",null,t.readyInMinutes)),r.a.createElement("div",{className:"stats__item"},r.a.createElement("i",{className:"fas fa-star"}),r.a.createElement("span",null,t.spoonacularScore)),r.a.createElement("div",{className:"stats__item"},r.a.createElement("i",{className:"fas fa-users"}),r.a.createElement("span",null,t.servings)),r.a.createElement("div",{className:"stats__item"},r.a.createElement("i",{className:"fas fa-coins"}),r.a.createElement("span",null,"$",a)))},O=a(8),j=Object(u.b)((function(e){return{user:e.user}}))((function(e){var t=e.data;return r.a.createElement(O.b,{to:{pathname:"/recipe",state:t}},r.a.createElement("div",{className:"img"},r.a.createElement("img",{src:t.image,alt:t.title})),r.a.createElement("div",{className:"results__item__text"},r.a.createElement("h4",{className:"title"},t.title),r.a.createElement("p",{className:"source"},"Recipe by ",r.a.createElement("strong",null,t.sourceName))),r.a.createElement("div",{className:"results__item__scores"},r.a.createElement("div",{className:"results__item__scores__score"},r.a.createElement("i",{className:"fas fa-clock"}),r.a.createElement("span",null,t.readyInMinutes)),r.a.createElement("div",{className:"results__item__scores__score"},r.a.createElement("i",{className:"fas fa-star rating"}),r.a.createElement("span",null,t.spoonacularScore)),r.a.createElement("div",{className:"results__item__scores__score"},r.a.createElement("i",{className:"fas fa-users"}),r.a.createElement("span",null,t.servings))))})),y=a(2),I=a(14),S=a.n(I),N=function(e){return{type:"FETCH_USER_SUCCESS",payload:e}},_=function(e){return{type:"SET_USER_FAVOURITES__DETAILS",payload:e}},A=function(e){return{type:"FETCH_USER_FAILURE",payload:e}},C=function(e){return console.log(e),function(){var t=Object(m.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S()({method:"GET",url:"https://api.spoonacular.com/recipes/informationBulk?ids=".concat(e,"&apiKey=").concat("b4783ea160ce4158a0220ce00e812a53")}).then((function(e){a(_(e.data))})).catch((function(e){console.log(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(m.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"FETCH_USER_BEGIN"}),t.next=3,S()({method:"POST",url:"/api/login",data:JSON.stringify(e),headers:{"Content-type":"application/json"}}).then((function(e){function t(){return(t=Object(m.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e,"user data"),t.next=3,a(N(e.data));case 3:return t.next=5,a(C(e.data.favourites));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()})).catch((function(e){a(A(e.response))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{setFavourite:function(t){return e((a=t,function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_USER_BEGIN"}),e.next=3,S()({method:"POST",url:"/api/addfaveourite",data:JSON.stringify(a),headers:{"Content-type":"application/json"}}).then((function(e){t(N(e.data))})).catch((function(e){A(e.data)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a},deleteFavourite:function(t){return e((a=t,console.log(a),function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S()({method:"POST",url:"/api/deletefavourite",data:JSON.stringify(a),headers:{"Content-type":"application/json"}}).then((function(e){function t(){return(t=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log(e.data),function(){t.apply(this,arguments)}()})).catch((function(e){A(e.data)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a},setUserFavourites:function(t){return e(_(t))},setUserFavouritesId:function(t){return e(function(e){return{type:"SET_USER_FAVOURITES__ID",payload:e}}(t))},setUser:function(t){return e(R(t))}}}))((function(e){var t=e.setFavourite,a=e.deleteFavourite,n=e.user,c=e.id,s=e.setUserFavourites,i=(e.setUser,e.setUserFavouritesId),u=n.user.favourites.includes(c),o=function(){var e=Object(m.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.user.favouritesDetails.filter((function(e){return e.id!==t}));case 2:return a=e.sent,e.next=5,n.user.favourites.filter((function(e){return e!==t}));case 5:return r=e.sent,e.next=8,s(a);case 8:return e.next=10,i(r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"favourite-button"},u?r.a.createElement("i",{onClick:function(){o(c),a({email:n.user.email,id:c})},className:"fas fa-trash-alt favourite"}):r.a.createElement("i",{onClick:function(){return t({email:n.user.email,id:c})},className:"far fa-heart favourite"}))})),U=Object(u.b)((function(e){return{similarData:e.recipe.similarRecipes,user:e.user}}),(function(e){return{similarRecipes:function(t){return e(b(t))}}}))((function(e){var t=e.user,a=e.similarRecipes,c=e.similarData,s=void 0===c?[]:c,u=e.location,o=Object(i.f)(),l=u.state,m=(l.pricePerServing/100).toFixed(2);return console.log(t),Object(n.useEffect)((function(){window.scrollTo(0,0);var e=!1;return e||a(l.id),function(){e=!0}}),[l.id,a]),r.a.createElement("div",{className:"single-recipe"},r.a.createElement("div",{className:"img"},r.a.createElement("img",{src:l.image,alt:l.title})),r.a.createElement(v,{data:l,newPrice:m}),r.a.createElement("div",{className:"title-container container"},r.a.createElement("h2",{className:"title "},l.title),r.a.createElement("p",{className:"source"},"Recipe by ",r.a.createElement("strong",null,l.sourceName))),r.a.createElement("div",{className:"single-recipe__text container"},r.a.createElement("p",{className:"summary",dangerouslySetInnerHTML:{__html:l.summary}})),r.a.createElement("div",{className:"single-recipe__ingredients list container"},r.a.createElement("h2",null,"Ingredients:"),r.a.createElement("ul",null,l.extendedIngredients.map((function(e,t){return null===e?null:r.a.createElement("li",{key:t},e.original,r.a.createElement("span",null,"(",e.measures.metric.amount.toFixed(0),e.measures.metric.unitLong,")"))})))),r.a.createElement("div",{className:"single-recipe__features",onClick:t.loggedIn?null:function(){return o.push("/account")}},t.loggedIn?r.a.createElement(w,{id:l.id}):null,t.loggedIn&&t.user.favourites.includes(l.id)?"Remove":"Save"),r.a.createElement("div",{className:"single-recipe__instructions list container"},r.a.createElement("h2",null,"Method:"),l.analyzedInstructions.map((function(e){return e===[]?null:r.a.createElement("div",{className:"method-steps"},r.a.createElement("h3",null,e.name),r.a.createElement("ul",null,e.steps.map((function(e){return r.a.createElement("li",{key:e.number},e.step)}))))}))),r.a.createElement("div",{className:"similar-recipes"},r.a.createElement("h2",{className:"container"},"Similar Recipes"),r.a.createElement("ul",{className:"results",id:"similar"},s.map((function(e){return r.a.createElement("li",{key:e.id,className:"results__item"},r.a.createElement(j,{data:e}))})))))})),T=a(37),B=Object(u.b)((function(e){return{data:e.recipe.data,searchResults:e.recipe.searchResults,cuisine:e.recipe.cuisine,user:e.user}}),(function(e){return{searchRecipe:function(t,a){return e(g(t,a))},fetchData:function(t){return e(d(t))},pullOnRefresh:function(){return e(function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:"REFRESH_RECIPES",payload:[]});case 2:return e.next=4,t(d([]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.data,a=void 0===t?[]:t,n=e.searchResults,c=void 0===n?[]:n,s=e.searchRecipe,i=e.fetchData,u=e.cuisine,o=e.user,l=e.pullOnRefresh;return r.a.createElement(T.a,{dataLength:a.length,next:""===u?function(){return i(a)}:function(){return s(u,a.length)},hasMore:!0,loader:r.a.createElement("h4",null,"Loading..."),endMessage:r.a.createElement("p",{style:{textAlign:"center"}},r.a.createElement("b",null,"Yay! You have seen it all")),refreshFunction:l,pullDownToRefresh:!0,pullDownToRefreshThreshold:50,pullDownToRefreshContent:r.a.createElement("h3",{style:{textAlign:"center"}},"\u2193 Pull down to refresh"),releaseToRefreshContent:r.a.createElement("h3",{style:{textAlign:"center"}},"\u2191 Release to refresh")},r.a.createElement("ul",{className:"results"},c.length>1?c.map((function(e){return r.a.createElement("li",{className:"results__item",key:e.id},r.a.createElement(j,{data:e}),o.loggedIn?r.a.createElement(w,{id:e.id}):null)})):a.map((function(e){return r.a.createElement("li",{className:"results__item",key:e.id},r.a.createElement(j,{data:e}),o.loggedIn?r.a.createElement(w,{id:e.id}):null)}))))})),x=Object(u.b)((function(e){return{data:e.recipe.data}}),(function(e){return{fetchData:function(t){return e(d(t))}}}))((function(e){var t=e.fetchData,a=e.data,c=void 0===a?[]:a;return Object(n.useEffect)((function(){if(c.length<1){function e(){return(e=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(c));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}}),[]),console.log(c),r.a.createElement("div",{className:"home"},r.a.createElement(B,null))})),F=a(7);var k=Object(u.b)(null,(function(e){return{searchRecipe:function(t){return e(function(e){return function(t){t({type:"FETCH_RECIPE_BEGIN"}),fetch("https://api.spoonacular.com/recipes/complexSearch?&query=".concat(e,"&apiKey=").concat(f)).then((function(e){return e.json()})).then((function(e){var a=e.results.map((function(e){return e.id}));t(h(a))})).catch((function(e){t(E(e))}))}}(t))}}}))((function(e){var t=e.searchRecipe,a=Object(n.useState)(""),c=Object(F.a)(a,2),s=c[0],i=c[1],u=Object(n.useState)(!1),o=Object(F.a)(u,2),l=o[0],m=o[1],f=function(e,t){var a=Object(n.useState)(e),r=Object(F.a)(a,2),c=r[0],s=r[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){s(e)}),t);return function(){clearTimeout(a)}}),[e,t]),c}(s,500);return Object(n.useEffect)((function(){f&&(m(!0),t(s),console.log(s),m(!1))}),[f,s,t]),r.a.createElement("div",{className:"autocomplete container"},r.a.createElement("input",{placeholder:"Search recipe...",onChange:function(e){return i(e.target.value)}}),l&&r.a.createElement("div",null,"Searching ..."))})),H=Object(u.b)((function(e){return{data:e.recipe.data}}),(function(e){return{searchCuisine:function(t,a){return e(g(t,a))},setCuisine:function(t){return e(function(e){return{type:"SET_CUISINE",payload:e}}(t))}}}))((function(e){var t=e.setCuisine,a=e.searchCuisine;e.data;return r.a.createElement("div",{className:"wrapper"},r.a.createElement("ul",{className:"cuisines"},["American","British","Cajun","Caribbean","Chinese","Greek","Indian","Italian","Japanese","Korean","Mediterranean","Mexican","Southern","Spanish","Thai","Vietnamese"].map((function(e,n){return r.a.createElement("li",{className:"cuisines__item",key:n,onClick:function(){t(e),a(e,0)}},e)}))))})),P=function(){return r.a.createElement("div",{className:"search"},r.a.createElement(k,null),r.a.createElement(H,null),r.a.createElement(B,null))},M=Object(u.b)(null,(function(e){return{createUser:function(t){return e((a=t,console.log(a),function(e){e({type:"FETCH_USER_BEGIN"}),S()({method:"POST",url:"https://api.spoonacular.com/users/connect?apiKey=".concat("b4783ea160ce4158a0220ce00e812a53"),data:JSON.stringify(a),headers:{"Content-type":"application/json"}}).then((function(t){console.log(t);var n=Object(y.a)(Object(y.a)({},a),t.data);S()({method:"POST",url:"/api/register",data:JSON.stringify(n),headers:{"Content-type":"application/json"}}).then((function(t){return console.log(t),e(N(t.data))})).catch((function(t){return e(A(t.response.data.message))}))})).catch((function(t){return console.log(t),e(A(t.response.data.message))}))}));var a}}}))((function(e){var t,a,c=e.createUser,s=e.user,u=Object(n.useState)(""),o=Object(F.a)(u,2),f=o[0],p=o[1],E=Object(n.useState)(""),d=Object(F.a)(E,2),h=d[0],g=d[1],b=Object(n.useState)(""),v=Object(F.a)(b,2),O=v[0],j=v[1],y=Object(i.f)();Object(n.useEffect)((function(){if(s.loggedIn)return y.push("/")}),[s.loggedIn,y]);var I=function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c({name:f,email:h,password:O});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{className:"authentication",onSubmit:I},r.a.createElement("p",null,"register"===(null===(t=s.error)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.type)?s.error.data.message:"Register"),r.a.createElement("input",{onChange:function(e){return p(e.target.value)},type:"text",name:"Full name",className:"name",placeholder:"Full name",required:!0}),r.a.createElement("input",{onChange:function(e){return g(e.target.value)},type:"email",name:"email",className:"email",placeholder:"Email address",required:!0}),r.a.createElement("input",{onChange:function(e){return j(e.target.value)},type:"password",name:"password",className:"password",placeholder:"Password",required:!0}),r.a.createElement("button",{type:"submit",className:"submit"},"Create account",r.a.createElement("i",{className:"fas fa-arrow-right"})))})),D=Object(i.g)(Object(u.b)(null,(function(e){return{userDetails:function(t){return e(R(t))},fetchData:function(t){return e(C(t))}}}))((function(e){var t,a,c=e.userDetails,s=e.user,u=e.fetchData,o=Object(n.useState)(""),f=Object(F.a)(o,2),p=f[0],E=f[1],d=Object(n.useState)(""),h=Object(F.a)(d,2),g=h[0],b=h[1],v=Object(i.f)();Object(n.useEffect)((function(){if(s.loggedIn)return v.push("/")}),[s.loggedIn]);var O=function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c({email:p,password:g});case 3:return e.next=5,u(s.user.favourites);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{className:"authentication",onSubmit:O},r.a.createElement("p",null,(null===(t=s.error)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)?s.error.data.message:"Login"),r.a.createElement("input",{onChange:function(e){return E(e.target.value)},type:"email",className:"email",name:"email",placeholder:"Email address",required:!0}),r.a.createElement("input",{onChange:function(e){return b(e.target.value)},type:"password",name:"password",className:"password",placeholder:"Password",required:!0}),r.a.createElement("button",{type:"submit",className:"submit"},"Login",r.a.createElement("i",{className:"fas fa-arrow-right"})))}))),V=Object(u.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,a=Object(i.f)();return r.a.createElement("div",{className:"account container"},r.a.createElement("div",{className:"account__user-info"},r.a.createElement("div",{className:"back-btn",onClick:function(){return a.goBack()}},r.a.createElement("i",{className:"fas fa-arrow-left"})),r.a.createElement("h2",null,"Sign up")),r.a.createElement(M,{user:t}),r.a.createElement(D,{user:t}))})),J=a(38),G=a.n(J),L=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{newUserImage:function(t){return e((a=t,function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"FETCH_USER_BEGIN"}),S()({method:"POST",url:"/api/upload",data:a,headers:{"Content-type":"multipart/form-data"}}).then((function(e){return console.log(e),t(N(e.data))})).catch((function(e){return console.log(e),console.log(e.response),t(A(e.response.data))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a}}}))((function(e){var t,a=e.user,c=e.newUserImage,s=e.setImage,i=Object(n.useState)(""),u=Object(F.a)(i,2),o=u[0],f=u[1],p=function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,f(t.target.files[0]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o){e.next=11;break}return e.next=4,new FormData;case 4:return n=e.sent,e.next=7,n.append("file",o);case 7:return e.next=9,n.append("id",a.user._id);case 9:return e.next=11,c(n);case 11:return e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:E,className:"file-upload",encType:"multipart/form-data"},r.a.createElement("p",null,(null===(t=a.error)||void 0===t?void 0:t.msg)?a.error.msg:""),r.a.createElement("input",{type:"file",onChange:p}),r.a.createElement("div",{className:"file-upload__btn"},r.a.createElement("button",{type:"submit",className:"submit"},"Upload"),r.a.createElement("button",{className:"close",onClick:function(){return s(!1)}},"Close")))})),Q=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{logOut:function(){return e((function(e){return e({type:"FETCH_USER_BEGIN"}),e({type:"LOG_USER_OUT"})}))}}}))((function(e){var t=e.logOut,a=(e.user,Object(i.f)()),n=function(){var e=Object(m.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t();case 3:return e.next=5,localStorage.clear();case 5:return e.abrupt("return",a.push("/"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"auth-btn"},r.a.createElement("button",{className:"btn-login",onClick:n},"Log out"))})),Y=Object(u.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,a=Object(i.f)(),c=Object(n.useState)(!1),s=Object(F.a)(c,2),u=s[0],o=s[1];return console.log(t),r.a.createElement("div",{className:"dashboard container"},r.a.createElement("div",{className:"account__user-info"},r.a.createElement("div",{className:"back-btn",onClick:function(){return a.goBack()}},r.a.createElement("i",{className:"fas fa-arrow-left"})),r.a.createElement("div",{className:"account__user-info__logo",onClick:function(){return o(!u)}},r.a.createElement("img",{src:t.user.image?"/uploads/".concat(t.user.image):G.a,alt:"profile image"})," ",r.a.createElement("i",{className:"fas fa-plus"}))),u?r.a.createElement(L,{setImage:o}):null,r.a.createElement("h2",{className:"dashboard-name"},t.user.name),r.a.createElement(O.b,{className:"favourites-btn",to:"/favourites"},r.a.createElement("button",null,"Favourites")),r.a.createElement(Q,null))})),K=Object(i.g)(Object(u.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,a=e.history;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__container container"},r.a.createElement("div",{className:"mobile-nav"},"/recipe"===a.location.pathname?r.a.createElement("i",{onClick:function(){return a.goBack()},className:"fas fa-arrow-left"}):r.a.createElement(O.b,{to:"/",className:"header__container__icon"},r.a.createElement("i",{className:"fas fa-home"}))),r.a.createElement(O.b,{to:"/",className:"home__title"},r.a.createElement("h1",{onClick:function(){window.scrollTo({top:0,behavior:"smooth"})}},t.fetchSuccess?t.user.name:"Recipeasy")),r.a.createElement("div",{className:"menu mobile-nav"},r.a.createElement(O.b,{to:"/search",className:"header__container__icon search"},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement(O.b,{to:t.loggedIn?"/dashboard":"/account",className:"header__container__icon"},r.a.createElement("i",{className:"fas fa-user-circle"})))))}))),X=function(e){var t=Object(i.f)();return r.a.createElement("div",{className:"header-body"},r.a.createElement(K,{history:t}),r.a.createElement("div",{id:"content"},e.children))},q=Object(u.b)((function(e){return{user:e.user,data:e.user.user.favouritesDetails}}),(function(e){return{fetchData:function(t){return e(C(t))}}}))((function(e){var t=e.user,a=e.fetchData,c=e.data,s=void 0===c?[]:c,i=Object(n.useState)(!0),u=Object(F.a)(i,2),o=u[0],f=u[1];return Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t.user.favourites);case 2:return console.log("fetch"),e.next=5,f(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"favourites"},o?r.a.createElement("h4",null,"Loading..."):r.a.createElement("ul",{className:"results"},s.map((function(e){return r.a.createElement("li",{className:"results__item",key:e.id},r.a.createElement(j,{data:e}),t.loggedIn?r.a.createElement(w,{id:e.id}):null," ")}))))})),z=Object(u.b)((function(e){return{user:e.user}}))((function(){return r.a.createElement(O.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/dashboard",component:Y}),r.a.createElement(i.a,{path:"/account",component:V}),r.a.createElement(X,null,r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(x,null)),r.a.createElement(i.a,{path:"/search"},r.a.createElement(P,null)),r.a.createElement(i.a,{path:"/recipe",component:U}),r.a.createElement(i.a,{path:"/favourites",component:q})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(39),Z=a(12),$=a(25),ee=a(40),te=a.n(ee),ae={user:{favouritesDetails:[]},loading:!1,error:null,loggedIn:!1,loggedOut:!0,image:null},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_BEGIN":return Object(y.a)(Object(y.a)({},e),{},{loading:!0});case"FETCH_USER_SUCCESS":return Object(y.a)(Object(y.a)({},e),{},{user:t.payload,error:null,loading:!1,loggedIn:!0,loggedOut:!1});case"SET_USER_FAVOURITES__DETAILS":return Object(y.a)(Object(y.a)({},e),{},{user:Object(y.a)(Object(y.a)({},e.user),{},{favouritesDetails:t.payload})});case"SET_USER_FAVOURITES__ID":return Object(y.a)(Object(y.a)({},e),{},{user:Object(y.a)(Object(y.a)({},e.user),{},{favourites:t.payload})});case"SET_USER_ON_RELOAD":return Object(y.a)(Object(y.a)({},e),{},{user:t.payload.user,error:t.payload.error,loading:t.payload.loading,loggedIn:t.payload.loggedIn});case"FETCH_USER_FAILURE":return Object(y.a)(Object(y.a)({},e),{},{error:t.payload,loading:!1,loggedIn:!1});case"LOG_USER_OUT":return Object(y.a)(Object(y.a)({},e),{},{user:{},error:null,loading:!1,loggedIn:!1,loggedOut:!0,image:{}});default:return e}},re={searchResults:[],data:[],loading:!1,error:null,cuisine:"",similarRecipes:[]},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CUISINE":return Object(y.a)(Object(y.a)({},e),{},{loading:!1,error:null,cuisine:t.payload});case"FETCH_RECIPE_BEGIN":return Object(y.a)(Object(y.a)({},e),{},{loading:!0,error:null});case"FETCH_RECIPE_SUCCESS":return Object(y.a)(Object(y.a)({},e),{},{data:e.data.concat(t.payload),searchResults:[],loading:!1,error:null,fetchSuccess:!0});case"FETCH_SEARCH_RECIPE_SUCCESS":return Object(y.a)(Object(y.a)({},e),{},{searchResults:t.payload,error:null,loading:!1,fetchSuccess:!0});case"FETCH_SIMILAR_RECIPES":return Object(y.a)(Object(y.a)({},e),{},{similarRecipes:t.payload,loading:!1,error:null});case"REFRESH_RECIPES":return Object(y.a)(Object(y.a)({},e),{},{data:t.payload,loading:!1,error:null,fetchSuccess:!1});case"FETCH_RECIPE_FAILURE":return Object(y.a)(Object(y.a)({},e),{},{loading:!1,error:t.payload.message});default:return e}},se=a(41),ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,ue={key:"root",storage:te.a},oe=Object(Z.c)({recipe:ce,user:ne}),le=Object($.a)(ue,oe),me=Object(Z.d)(le,ie(Object(Z.a)(se.a))),fe=Object($.b)(me);s.a.render(r.a.createElement(u.a,{store:me},r.a.createElement(W.a,{loading:null,persistor:fe},r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.c3c356b4.chunk.js.map